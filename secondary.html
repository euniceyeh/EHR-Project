<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Electronic Health Records: Who Uses It?</title>
  <meta name="description" content="This is the final project report for BST 260 on the relationships between the use of Electronic Health Records (EHR) and provider demographics, separately among the eligible professionals (EPs) and eligible hospitals participating in the Medicare &amp; Medicaid EHR Incentive Program in 2016.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Electronic Health Records: Who Uses It?" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the final project report for BST 260 on the relationships between the use of Electronic Health Records (EHR) and provider demographics, separately among the eligible professionals (EPs) and eligible hospitals participating in the Medicare &amp; Medicaid EHR Incentive Program in 2016." />
  <meta name="github-repo" content="euniceyeh/EHR-Project" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Electronic Health Records: Who Uses It?" />
  
  <meta name="twitter:description" content="This is the final project report for BST 260 on the relationships between the use of Electronic Health Records (EHR) and provider demographics, separately among the eligible professionals (EPs) and eligible hospitals participating in the Medicare &amp; Medicaid EHR Incentive Program in 2016." />
  

<meta name="author" content="Eunice Yeh, Lauren Yoo, Katherine Wang">


<meta name="date" content="2017-12-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="primary.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">BST 260 Final Project: EHR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview and Motivation</a></li>
<li class="chapter" data-level="2" data-path="work.html"><a href="work.html"><i class="fa fa-check"></i><b>2</b> Related Work</a></li>
<li class="chapter" data-level="3" data-path="questions.html"><a href="questions.html"><i class="fa fa-check"></i><b>3</b> Initial Questions</a></li>
<li class="chapter" data-level="4" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>4</b> Data</a><ul>
<li class="chapter" data-level="4.1" data-path="data.html"><a href="data.html#eligible-professionals-eps"><i class="fa fa-check"></i><b>4.1</b> Eligible Professionals (EPs)</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data.html"><a href="data.html#sourcemetadata"><i class="fa fa-check"></i><b>4.1.1</b> Source/Metadata</a></li>
<li class="chapter" data-level="4.1.2" data-path="data.html"><a href="data.html#wrangling"><i class="fa fa-check"></i><b>4.1.2</b> Wrangling</a></li>
<li class="chapter" data-level="4.1.3" data-path="data.html"><a href="data.html#output"><i class="fa fa-check"></i><b>4.1.3</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data.html"><a href="data.html#eligible-hospitals-hosp"><i class="fa fa-check"></i><b>4.2</b> Eligible Hospitals (Hosp)</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data.html"><a href="data.html#sourcemetadata-1"><i class="fa fa-check"></i><b>4.2.1</b> Source/Metadata</a></li>
<li class="chapter" data-level="4.2.2" data-path="data.html"><a href="data.html#wrangling-1"><i class="fa fa-check"></i><b>4.2.2</b> Wrangling</a></li>
<li class="chapter" data-level="4.2.3" data-path="data.html"><a href="data.html#output-1"><i class="fa fa-check"></i><b>4.2.3</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data.html"><a href="data.html#vendors-products-ehr"><i class="fa fa-check"></i><b>4.3</b> Vendors &amp; Products (EHR)</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data.html"><a href="data.html#sourcemetadata-2"><i class="fa fa-check"></i><b>4.3.1</b> Source/Metadata</a></li>
<li class="chapter" data-level="4.3.2" data-path="data.html"><a href="data.html#wrangling-2"><i class="fa fa-check"></i><b>4.3.2</b> Wrangling</a></li>
<li class="chapter" data-level="4.3.3" data-path="data.html"><a href="data.html#output-2"><i class="fa fa-check"></i><b>4.3.3</b> Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="primary.html"><a href="primary.html"><i class="fa fa-check"></i><b>5</b> Primary Analysis</a><ul>
<li class="chapter" data-level="5.1" data-path="primary.html"><a href="primary.html#physician-demographics"><i class="fa fa-check"></i><b>5.1</b> Physician Demographics</a><ul>
<li class="chapter" data-level="5.1.1" data-path="primary.html"><a href="primary.html#exploratory"><i class="fa fa-check"></i><b>5.1.1</b> Exploratory</a></li>
<li class="chapter" data-level="5.1.2" data-path="primary.html"><a href="primary.html#final-analysis"><i class="fa fa-check"></i><b>5.1.2</b> Final Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="primary.html"><a href="primary.html#hospital-demographics"><i class="fa fa-check"></i><b>5.2</b> Hospital Demographics</a><ul>
<li class="chapter" data-level="5.2.1" data-path="primary.html"><a href="primary.html#exploratory-1"><i class="fa fa-check"></i><b>5.2.1</b> Exploratory</a></li>
<li class="chapter" data-level="5.2.2" data-path="primary.html"><a href="primary.html#final-analysis-1"><i class="fa fa-check"></i><b>5.2.2</b> Final Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="secondary.html"><a href="secondary.html"><i class="fa fa-check"></i><b>6</b> Secondary Analysis</a><ul>
<li class="chapter" data-level="6.1" data-path="secondary.html"><a href="secondary.html#by-geographical-regions"><i class="fa fa-check"></i><b>6.1</b> By Geographical Regions</a><ul>
<li class="chapter" data-level="6.1.1" data-path="secondary.html"><a href="secondary.html#physician-demographics-1"><i class="fa fa-check"></i><b>6.1.1</b> Physician Demographics</a></li>
<li class="chapter" data-level="6.1.2" data-path="secondary.html"><a href="secondary.html#hospital-demographics-1"><i class="fa fa-check"></i><b>6.1.2</b> Hospital Demographics</a></li>
<li class="chapter" data-level="6.1.3" data-path="secondary.html"><a href="secondary.html#regional-conclusions"><i class="fa fa-check"></i><b>6.1.3</b> Regional Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="secondary.html"><a href="secondary.html#by-ehr-vendors"><i class="fa fa-check"></i><b>6.2</b> By EHR Vendors</a><ul>
<li class="chapter" data-level="6.2.1" data-path="secondary.html"><a href="secondary.html#physician-demographics-2"><i class="fa fa-check"></i><b>6.2.1</b> Physician Demographics</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Electronic Health Records: Who Uses It?</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="secondary" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Secondary Analysis</h1>
<div id="by-geographical-regions" class="section level2">
<h2><span class="header-section-number">6.1</span> By Geographical Regions</h2>
<div id="physician-demographics-1" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Physician Demographics</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;zipcode&quot;</span>)
<span class="kw">data</span>(<span class="st">&quot;fifty_states&quot;</span>)
states_map &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;state&quot;</span>)</code></pre></div>
<pre><code>## 
## Attaching package: &#39;maps&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     map</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Business_State_Territory) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(Business_State_Territory), <span class="dt">fill =</span> count), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_grey</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Number of Physicians in Dataset&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># gender distribution</span>
EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Business_State_Territory) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">fem =</span> <span class="kw">mean</span>(gndr <span class="op">==</span><span class="st"> &quot;F&quot;</span>), <span class="dt">male =</span> <span class="kw">mean</span>(gndr <span class="op">==</span><span class="st"> &quot;M&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(Business_State_Territory), <span class="dt">fill =</span> male), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_grey</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Distribution of Male Physicians&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(grd_yr)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Business_State_Territory) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">yrsgrad =</span> <span class="kw">mean</span>(<span class="dv">2016</span> <span class="op">-</span><span class="st"> </span>grd_yr))

age <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(Business_State_Territory), <span class="dt">fill =</span> yrsgrad), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_grey</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Years Since Graduation&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>Among those Physicians in our Vendor data set, there were many more freshly graduated practitioners in Minnesota compared to the rest of the country. We interpreted this as being similar to an ‘age’ variable, since people who have 15 years since graduating &amp; getting their degrees are more likely to be younger than those who have been graduated for 26 years.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mn &lt;-<span class="st"> </span><span class="kw">subset</span>(states_map, region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;minnesota&quot;</span>))

zip_mapdata &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(grd_yr) <span class="op">&amp;</span><span class="st"> </span>Business_State_Territory <span class="op">==</span><span class="st"> &quot;Minnesota&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(ZIP) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">yrsgrad =</span> <span class="kw">mean</span>(<span class="dv">2016</span> <span class="op">-</span><span class="st"> </span>grd_yr)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(zipcode, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;ZIP&quot;</span> =<span class="st"> &quot;zip&quot;</span>))</code></pre></div>
<pre><code>## Warning: Column `ZIP`/`zip` joining factor and character vector, coercing
## into character vector</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#minnesota only</span>
<span class="co"># zip_mapdata %&gt;% </span>
<span class="co">#   ggplot() +</span>
<span class="co">#   geom_polygon(data=mn, aes(x=long, y=lat, group = group),colour=&quot;white&quot;, fill=&quot;grey70&quot; ) +</span>
<span class="co">#   geom_point(aes(x=longitude, y=latitude, color = yrsgrad),size=2,alpha=.5) +</span>
<span class="co">#   coord_fixed(1.5) +</span>
<span class="co">#   theme_void()</span>

<span class="co">#zoomed in on minnesota</span>
zip_mapdata <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data=</span>states_map, <span class="kw">aes</span>(<span class="dt">x=</span>long, <span class="dt">y=</span>lat, <span class="dt">group =</span> group),<span class="dt">colour=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>longitude, <span class="dt">y=</span>latitude, <span class="dt">color =</span> yrsgrad),<span class="dt">size=</span><span class="dv">2</span>,<span class="dt">alpha=</span>.<span class="dv">8</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_gradientn</span>(<span class="dt">colors=</span><span class="kw">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Reds&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">88</span>, <span class="op">-</span><span class="dv">98</span>),  <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">42</span>, <span class="dv">50</span>), <span class="dt">ratio =</span> <span class="fl">1.5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>Here we can see that most of the Physicians we have are clustered near Minneapolis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">useehr &lt;-<span class="st"> </span>EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(st) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num =</span> <span class="kw">n</span>(), <span class="dt">used =</span> <span class="kw">sum</span>(ehr <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pct =</span> used<span class="op">/</span>num)

state_name &lt;-<span class="st"> </span><span class="kw">c</span>(state.name,<span class="st">&quot;District Of Columbia&quot;</span>)
states &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">state_name =</span> state_name, <span class="dt">state_abb =</span> <span class="kw">c</span>(state.abb, <span class="st">&quot;DC&quot;</span>))

useehr &lt;-<span class="st"> </span>useehr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(states, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;st&quot;</span> =<span class="st"> &quot;state_abb&quot;</span>))</code></pre></div>
<pre><code>## Warning: Column `st`/`state_abb` joining character vector and factor,
## coercing into character vector</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">useehr <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(state_name), <span class="dt">fill =</span> pct), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Percent EHR Usage&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p>In our dataset overall, we had more blank information on EHR usage than we did on confirmed EHR usage, which is why the percentages are low overall. However, it is interesting to note that Alaska and Vermont had extremely low EHR usage, while the Midwest tended to have relatively more adoption. Perhaps Alaska and Vermont have more rural environments, while many of the EHR vendors are based in the Midwest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#find what types of product settings exist</span>
<span class="kw">levels</span>(EHR_EPs<span class="op">$</span>Product_Setting)</code></pre></div>
<pre><code>## [1] &quot;&quot;           &quot;Ambulatory&quot; &quot;Inpatient&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#ambulatory vs inpatient numbers</span>
EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Product_Setting <span class="op">!=</span><span class="st"> &quot;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">amb =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Ambulatory&quot;</span>), 
                      <span class="dt">inp =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Inpatient&quot;</span>)) </code></pre></div>
<pre><code>##   amb inp
## 1 821 133</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prod_setting &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Product_Setting <span class="op">!=</span><span class="st"> &quot;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Business_State_Territory) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num =</span> <span class="kw">n</span>(), 
            <span class="dt">amb =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Ambulatory&quot;</span>), 
            <span class="dt">inpat =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Inpatient&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">p_amb =</span> amb<span class="op">/</span>num, <span class="dt">p_inpp =</span> inpat<span class="op">/</span>num)

<span class="co"># table for overall percentages in merge dataset</span>
prod_setting_overall &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(), 
            <span class="dt">amb =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Ambulatory&quot;</span>), 
            <span class="dt">inpat =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Inpatient&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="st">&quot;Ambulatory (Outpatient)&quot;</span> =<span class="st"> </span>amb<span class="op">/</span>total, <span class="dt">Inpatient=</span> inpat<span class="op">/</span>total) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Place =</span> <span class="st">&quot;Overall&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Place, <span class="st">&quot;Ambulatory (Outpatient)&quot;</span>, Inpatient)
prod_setting_overall <span class="op">%&gt;%</span><span class="st"> </span>kable</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Place</th>
<th align="right">Ambulatory (Outpatient)</th>
<th align="right">Inpatient</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Overall</td>
<td align="right">0.8318136</td>
<td align="right">0.1347518</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ambulatory &lt;-<span class="st"> </span>prod_setting <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(Business_State_Territory), <span class="dt">fill =</span> p_amb), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Product Setting = Ambulatory&quot;</span>)

inpatient &lt;-<span class="st"> </span>prod_setting <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(Business_State_Territory), <span class="dt">fill =</span> p_inpp), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Product Setting = Inpatient&quot;</span>)

<span class="kw">grid.arrange</span>(ambulatory, inpatient, <span class="dt">nrow =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># california = outlier</span>
cali &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Business_State_Territory <span class="op">==</span><span class="st"> &quot;California&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">n</span>(), 
            <span class="dt">amb =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Ambulatory&quot;</span>), 
            <span class="dt">inpat =</span> <span class="kw">sum</span>(Product_Setting <span class="op">==</span><span class="st"> &quot;Inpatient&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="st">&quot;Ambulatory (Outpatient)&quot;</span> =<span class="st"> </span>amb<span class="op">/</span>total, <span class="dt">Inpatient =</span> inpat<span class="op">/</span>total) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="st">&quot;Ambulatory (Outpatient)&quot;</span>, Inpatient)

prod_setting_overall &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(prod_setting_overall,
                                  <span class="kw">data_frame</span>(<span class="dt">Place =</span> <span class="st">&quot;California&quot;</span>,
                                             <span class="st">&quot;Ambulatory (Outpatient)&quot;</span> =<span class="st"> </span>cali<span class="op">$</span><span class="st">`</span><span class="dt">Ambulatory (Outpatient)</span><span class="st">`</span>,
                                             <span class="dt">Inpatient =</span> cali<span class="op">$</span>Inpatient
                                  ))
prod_setting_overall <span class="op">%&gt;%</span><span class="st"> </span>kable</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Place</th>
<th align="right">Ambulatory (Outpatient)</th>
<th align="right">Inpatient</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Overall</td>
<td align="right">0.8318136</td>
<td align="right">0.1347518</td>
</tr>
<tr class="even">
<td align="left">California</td>
<td align="right">0.6666667</td>
<td align="right">0.3209877</td>
</tr>
</tbody>
</table>
<p>Product Setting refers to the type of practice setting that the EHR product is certified for. The possible settings are:</p>
<ul>
<li>Ambulatory: doctor’s offices, clinics, and other outpatient facilities</li>
<li>Inpatient: hospitals and other long-term care facilities</li>
</ul>
<p>We found that most EHR products were certified for ambulatory settings, by far. This extreme preference in ambulatory EHR products is consistent across the country, except in California where there is still a slight preference for ambulatory EHR products (among those adopting EHR’s in the incentive program), but it is less than the rest of the country.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># how many unique vendors</span>
<span class="kw">length</span>(<span class="kw">unique</span>(<span class="kw">factor</span>(EHR_EPs<span class="op">$</span>Vendor_Name)))</code></pre></div>
<pre><code>## [1] 79</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find top 10 vendors</span>
top10 &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Vendor_Name)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Vendor_Name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">top_n</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>## Selecting by num</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#unique vendors</span>
vendors &lt;-<span class="st"> </span><span class="kw">as.vector</span>(top10<span class="op">$</span>Vendor_Name)

<span class="co"># distribution of top 10 vendors </span>
EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Vendor_Name <span class="op">%in%</span><span class="st"> </span>vendors) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Vendor_Name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">num =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(Vendor_Name, num), <span class="dt">y =</span> num)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&#39;identity&#39;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># percent usage of top 10</span>
<span class="kw">sum</span>(top10<span class="op">$</span>num)<span class="op">/</span><span class="kw">nrow</span>(EHR_EPs)</code></pre></div>
<pre><code>## [1] 0.8500507</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pct_popvendors &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Business_State_Territory) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num =</span> <span class="kw">n</span>(), 
            <span class="dt">total_v =</span> <span class="kw">sum</span>(Vendor_Name <span class="op">%in%</span><span class="st"> </span>vendors),
            <span class="dt">opp =</span> num <span class="op">-</span><span class="st"> </span>total_v) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">p_vend =</span> total_v<span class="op">/</span>num, <span class="dt">u_vend =</span> opp<span class="op">/</span>num)

pct_popvendors <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(Business_State_Territory), <span class="dt">fill =</span> p_vend), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Usage of Top 10 Vendors&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-41-2.png" width="672" /></p>
<p>We found that the majority of EHR products used were from the top 10 vendors. Interestingly, though, Minnesota had almost 100% usage of the top 10 vendors. This could potentially be because many of the big vendors are based in the Midwest (ie Epic, Mayo Clinic, Cerner, etc).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#most common specialties in general</span>
EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(pri_spec) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">num =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num))</code></pre></div>
<pre><code>## # A tibble: 50 x 2
##                               pri_spec   num
##                                 &lt;fctr&gt; &lt;int&gt;
##  1                     FAMILY PRACTICE   192
##  2                   INTERNAL MEDICINE   126
##  3                  ORTHOPEDIC SURGERY    64
##  4                       ENDOCRINOLOGY    54
##  5                     GENERAL SURGERY    42
##  6                           NEUROLOGY    41
##  7 CARDIOVASCULAR DISEASE (CARDIOLOGY)    35
##  8                    GASTROENTEROLOGY    29
##  9               OBSTETRICS/GYNECOLOGY    24
## 10                   PULMONARY DISEASE    24
## # ... with 40 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># most common state -&gt; specialty</span>
specialty &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Business_State_Territory, pri_spec) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">num =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(Business_State_Territory, <span class="kw">desc</span>(num))

<span class="co">#check similar specialties</span>
<span class="co">#EHR_EPs %&gt;% filter(grepl(&quot;PSYCH&quot;, pri_spec)) %&gt;% distinct(pri_spec)</span>

specialty <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Business_State_Territory, pri_spec)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> num))</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>When it came to looking at patterns between primary specialty and states, it was nearly impossible to find useful information. There were too many states and too many different specialties to try to find significant correlations between the levels. Additionally, we tried to find group similar specialties but it did not make the results much more interpretable.</p>
</div>
<div id="hospital-demographics-1" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Hospital Demographics</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#load hosp_all data &amp; add long state names</span>
state_name &lt;-<span class="st"> </span><span class="kw">c</span>(state.name,<span class="st">&quot;District Of Columbia&quot;</span>)
states &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">state_name =</span> state_name, <span class="dt">state_abb =</span> <span class="kw">c</span>(state.abb, <span class="st">&quot;DC&quot;</span>))
hosp_all &lt;-<span class="st"> </span>hosp_clean <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(states, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;State&quot;</span> =<span class="st"> &quot;state_abb&quot;</span>))</code></pre></div>
<pre><code>## Warning: Column `State`/`state_abb` joining character vector and factor,
## coercing into character vector</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">beds &lt;-<span class="st"> </span>hosp_all <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Staffed_beds)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(state_name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">avgbed =</span> <span class="kw">mean</span>(Staffed_beds)) 

beds <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(state_name), <span class="dt">fill =</span> avgbed), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Average Hospital Beds per hospital&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<p>Vermont and Rhode Island had the lowest number of average hospital beds per hospital, which makes sense since they are small states. Connecticut and Florida had the highest average, suggesting that hospitals in that state tend to be bigger on average.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># patient days</span>
hosp_all <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Patient_days)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(state_name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">patient =</span> <span class="kw">mean</span>(Patient_days)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(state_name), <span class="dt">fill =</span> patient), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Across states, mean patient days per hospital&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<p>The distribution of average days at the hospital was mostly proportional to the distribution of average hospital beds from the previous map. The differences were:</p>
<ul>
<li>Florida had one of the highest averages for hospital beds (biggest hospitals) but did not have one of the highest average patient days (yay!)</li>
<li>Massachusetts, which was slightly above average in the number of hospital beds, ended up being one of the states with the longest patient days on average.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#total discharges</span>
hosp_all <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Total_discharges)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(state_name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">discharges =</span> <span class="kw">mean</span>(Total_discharges)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(state_name), <span class="dt">fill =</span> discharges), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Across states, mean discharges days per hospital on average&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-46-1.png" width="672" /></p>
<p>The distribution of average discharges was not very interesting - it was similar to the previous maps.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#avg revenue per discharge</span>
revenue &lt;-<span class="st"> </span>hosp_all <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Gross_patient_revenue) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(Total_discharges)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">per =</span> Gross_patient_revenue<span class="op">/</span>Total_discharges) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(State) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">rev =</span> <span class="kw">mean</span>(per))

revenue <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> id), <span class="dt">data =</span> fifty_states, <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey90&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> <span class="kw">tolower</span>(state_name), <span class="dt">fill =</span> rev), <span class="dt">map =</span> fifty_states, <span class="dt">color=</span><span class="st">&quot;grey50&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">6</span>, <span class="st">&quot;RdYlBu&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x=</span>states_map<span class="op">$</span>long, <span class="dt">y=</span>states_map<span class="op">$</span>lat) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_gray</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.line =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Across states, average revenue per discharge&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
<p>Looks like Montana has the highest average gross patient revenue per discharge.</p>
</div>
<div id="regional-conclusions" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Regional Conclusions</h3>
<p>The regional analyses served mostly exploratory/informational purposes. While we noticed many patterns regarding the Midwest, it is not clear if the patterns are due to association or causation. For example, we saw that the Midwestern states tended to have higher rates of EHR usage compared to the rest of the country. However, we also saw that many of the “Top 10” vendors in our data set were also based in the Midwest. There could have been confounding effects - our data set may not have been representative of the entire country - Healthit.gov cited over 75% of Physician EHR adoption by 2015, while our data set could only match about 20% EHR usage in 2016. We could have had a skewed sample of Physicians that happened to have more EHR adopter living in the Midwest. Also, the first plot showed that we did have strong representation in Physician counts in Minnesota and California, but not as much in the rest of the country.</p>
</div>
</div>
<div id="by-ehr-vendors" class="section level2">
<h2><span class="header-section-number">6.2</span> By EHR Vendors</h2>
<div id="physician-demographics-2" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Physician Demographics</h3>
<ol style="list-style-type: decimal">
<li>Check the distributions of number of practice locations, states, products, and vendors among practitioners whom we have EHR usage information on. Counts of these distributions are the number of practitioners.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#specialty vs year since graduation</span>
top_spec &lt;-<span class="st"> </span>EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(pri_spec)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(pri_spec) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>)

spec_list &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;OPTOMETRY&quot;</span>, <span class="st">&quot;CHIROPRACTIC&quot;</span>, <span class="st">&quot;DERMATOLOGY&quot;</span>, <span class="st">&quot;OPHTHALMOLOGY&quot;</span>, <span class="st">&quot;FAMILY PRACTICE&quot;</span>, <span class="st">&quot;INTERNAL MEDICINE&quot;</span>, <span class="st">&quot;OBSTETRICS/GYNECOLOGY&quot;</span>, <span class="st">&quot;PODIATRY&quot;</span>, <span class="st">&quot;PSYCHIATRY&quot;</span>, <span class="st">&quot;NEUROLOGY&quot;</span>)

EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(pri_spec <span class="op">%in%</span><span class="st"> </span>spec_list) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">yrsgrad =</span> <span class="dv">2016</span> <span class="op">-</span><span class="st"> </span>grd_yr) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> pri_spec, <span class="dt">y =</span> yrsgrad)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#vendors vs year since graduation</span>
EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Vendor_Name <span class="op">%in%</span><span class="st"> </span>vendors) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">yrsgrad =</span> <span class="dv">2016</span> <span class="op">-</span><span class="st"> </span>grd_yr) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Vendor_Name, <span class="dt">y =</span> yrsgrad)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-48-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#top vendors vs top specialty</span>
EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>((pri_spec <span class="op">%in%</span><span class="st"> </span>spec_list) <span class="op">&amp;</span><span class="st"> </span>(Vendor_Name <span class="op">%in%</span><span class="st"> </span>vendors)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(pri_spec, Vendor_Name)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>), <span class="dt">color =</span> <span class="st">&quot;steelblue4&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>),
        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>,
        <span class="dt">axis.title =</span> <span class="kw">element_blank</span>()) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Top 10 Primary Specialties versus Top 10 Vendors&quot;</span>)</code></pre></div>
<p><img src="EHR-Project_files/figure-html/unnamed-chunk-48-3.png" width="672" /></p>
<p>Interesting conclusions from the boxplots:</p>
<ul>
<li>Ophthalmology had the highest median years since graduation, which makes sense that we found that our EHR users had more years since graduation than non-EHR users</li>
<li>Mayo Clinic and GE Healthcare were used by the youngest practitioners, both having median years since graduation under 10 years.</li>
</ul>
<p>Interesting conclusions from the jitter plot:</p>
<ul>
<li>Integrated Practice Solutions, Inc, the second most popular vendor in our data set, is exclusively used by chiropractors. They also dominate the other vendors among the chiropractors.</li>
<li>Eyefinity, Inc also has a specific audience, with only ophthalmologists and optometrists (eye doctors) using their products.</li>
<li>Compulink Business Systems, Inc, is also very popular among the two eye specialties and their products seem to be targeted for a specific audience.</li>
<li>While NextGen Healthcare is used by all the top 10 specialties, they are most popular among the ophthalmologists and optometrists.</li>
<li>Modernizing Medicine Inc is very popular among dermatologists.</li>
<li>Epic Systems, Cerner Corporation, athenahealth, and GE Healthcare are pretty consistently used across all the top 10 disciplines. Epic is the most consistently popular, however.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Explore practitioner demographics: gender, graduation year, medical school attended, primary specialty.</li>
</ol>
<p>The following demographic relationships are among physicians not affiliated with any hospitals whom we have EHR vendor and product information on. So the sub-population here includes only the physicians who do use EHR.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">EHR_EPs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(grd_yr) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(products) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">table</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">EHR_EPs <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw">factor</span>(products), grd_yr)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_grid</span>(.<span class="op">~</span>gndr) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="fl">0.25</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Number of EHR Products&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Graduation Year&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Dist of Grad Year by Number of EHR Products Used by gndr&quot;</span>)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Perform Association Rule Learning on all variables from the first two sections. <strong>check the validity of using this method if my variables are not independent from one another.</strong> Here, each “transaction” is a practitioner who adapted EHR as part of the Medicare EHR Incentive Program in the U.S. ***used because we have variables with a lot of variables</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;arulesViz&quot;</span>)

<span class="co"># need to keep certain associational variables of interest and discretize them</span>
assoc &lt;-<span class="st"> </span>EPs_EHR <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>NPI, <span class="op">-</span>First.Name, <span class="op">-</span>Last.Name, <span class="op">-</span>Used.electronic.health.records, <span class="op">-</span>EHRuse) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Gradyr =</span> <span class="kw">as.factor</span>(grd_yr),
         <span class="dt">State =</span> <span class="kw">as.factor</span>(st),
         <span class="dt">locations =</span> <span class="kw">as.factor</span>(locations),
         <span class="dt">products =</span> <span class="kw">as.factor</span>(products),
         <span class="dt">vendors =</span> <span class="kw">as.factor</span>(vendors)
         ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>grd_yr, <span class="op">-</span>st)
<span class="kw">View</span>(assoc)

<span class="co"># convert from a data frame to a transaction dataset</span>
assoctrans &lt;-<span class="st"> </span><span class="kw">as</span>(assoc, <span class="st">&quot;transactions&quot;</span>)

<span class="co"># create rules using the apriori</span>
rules &lt;-<span class="st"> </span><span class="kw">apriori</span>(assoctrans, <span class="dt">parameter=</span><span class="kw">list</span>(<span class="dt">support=</span><span class="fl">0.01</span>, <span class="dt">confidence=</span><span class="fl">0.5</span>))
<span class="kw">plot</span>(rules)</code></pre></div>
<p>The result is a set of 4152 association rules with generally high confidence and low support (proportion of transactions in the dataset which contain the itemset). Let’s first trim this down a bit to show only important rules (confidence &gt; 0.85). We’ll pick the top 30 rules so we have a smaller subset to find meaningful relationships.</p>
<p>The top 30 rules are chosen with respect to the lift measure (a measure of rule strength) - the deviation of the support of the whole rule from the support expected under independence given the supports of both sides of the rule.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">subrules &lt;-<span class="st"> </span>rules[<span class="kw">quality</span>(rules)<span class="op">$</span>confidence <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.85</span>]
<span class="kw">inspect</span>(<span class="kw">head</span>(<span class="kw">sort</span>(subrules, <span class="dt">by =</span><span class="st">&quot;lift&quot;</span>),<span class="dv">30</span>))
<span class="kw">plot</span>(subrules, <span class="dt">method=</span><span class="st">&quot;grouped&quot;</span>, <span class="dt">control=</span><span class="kw">list</span>(<span class="dt">k=</span><span class="dv">50</span>))</code></pre></div>
<ul>
<li>The top 18 rules show that the strongest associations are among practitioners who use 5 EHR products across 2 different vendors in the state of Minnesota within a single practice.</li>
<li>The second highest set of rules shows a strong association among practitioners who use 7 EHR products across 2 different vendors in the state of California within a single practice.</li>
</ul>
<p>To explore the top rules, we created a couple visualizations.</p>
<p>We can visualize these top 18 rules using a directed network graph where the items are vertices and the directed edges are the rules in the direction of the antecedent (IF) to the consequent (THEN). (check this?)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">top18 &lt;-<span class="st"> </span><span class="kw">head</span>(<span class="kw">sort</span>(subrules, <span class="dt">by =</span><span class="st">&quot;lift&quot;</span>),<span class="dv">18</span>)
<span class="kw">plot</span>(top18, <span class="dt">method=</span><span class="st">&quot;graph&quot;</span>) <span class="co"># uses items and rules as vertices connecting them with directed edges </span>
<span class="kw">plot</span>(top18, <span class="dt">method=</span><span class="st">&quot;graph&quot;</span>, <span class="dt">control=</span><span class="kw">list</span>(<span class="dt">type=</span><span class="st">&quot;itemsets&quot;</span>)) <span class="co"># uses itemsets as vertices and rules are represented by directed edges</span></code></pre></div>
<p>In a parallel coordinates plot, the width of the arrows represents support and the intensity of the color represent confidence. We plotted the top 18 rules.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(top18, <span class="dt">method=</span><span class="st">&quot;paracoord&quot;</span>, <span class="dt">control=</span><span class="kw">list</span>(<span class="dt">reorder=</span><span class="ot">TRUE</span>))</code></pre></div>
<p>Using Associative Rule Learning, we found the following factors were important:</p>
<ul>
<li>number of EHR products used</li>
<li>number of vendors used</li>
<li>region (states)</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="primary.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/euniceyeh/EHR-Project/edit/master/05-Secondary.Rmd",
"text": "Edit"
},
"download": ["EHR-Project.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
